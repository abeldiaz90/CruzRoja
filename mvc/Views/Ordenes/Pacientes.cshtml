@model mvc.Models.Ordenes
@using (Html.BeginForm("Buscar", "Pacientes", FormMethod.Post))
{
	<legend>Datos del Paciente</legend>
	<div class="container">
		<div class="row">
			@Html.HiddenFor(model => model.Id)
			<div class="col-sm">
				@Html.LabelFor(model => model.Paciente.Nombre)
				@Html.EditorFor(Model => Model.Paciente.Nombre)
			</div>
			<div class="col-sm">
				@Html.LabelFor(model => model.Paciente.SegundoNombre)
				@Html.EditorFor(Model => Model.Paciente.SegundoNombre)
			</div>
			<div class="col-sm">
				@Html.LabelFor(model => model.Paciente.ApellidoPaterno)
				@Html.EditorFor(Model => Model.Paciente.ApellidoPaterno)
			</div>
			<div class="col-sm">
				@Html.LabelFor(model => model.Paciente.ApellidoMaterno)
				@Html.EditorFor(Model => Model.Paciente.ApellidoMaterno)
			</div>
		</div>
		<div class="row">
			<div class="col-sm">
				@Html.LabelFor(model => model.Paciente.FechaNacimiento)
				@Html.EditorFor(Model => Model.Paciente.FechaNacimiento)
			</div>
			<div class="col-sm">
				@Html.LabelFor(model => model.Paciente.IdSexo)
				@Html.EnumDropDownListFor(model => model.Paciente.Sexo)
			</div>
			<div>
				<button type="button" class="btn btn-outline-info" data-toggle="modal" data-target=".bd-example-modal-lg" id="btnBuscarPaciente">Buscar Pacientes</button>
			</div>
		</div>
	</div>

		<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div id="myPartialViewDiv">
						@{
							Html.RenderPartial("Resultados", Model.pacientes);
						}
					</div>
				</div>
			</div>
		</div>
}
<script>
	$(document).ready(function () {
		$('#btnBuscarPaciente').on('click', function () {
			var Nombre = $('#Paciente_Nombre').val();
			var SegundoNombre = $('#Paciente_SegundoNombre').val();
			var ApellidoPaterno = $('#Paciente_ApellidoPaterno').val();
			var ApellidoMaterno = $('#Paciente_ApellidoMaterno').val();
			var obj = { Nombre: Nombre, SegundoNombre: SegundoNombre, ApellidoPaterno: ApellidoPaterno, ApellidoMaterno: ApellidoMaterno };
			AjaxCall('/Pacientes/Buscar/' , JSON.stringify(obj), 'POST').done(function (response) {
				if (response.length > 0) {
					//var options = '';
					//options += '<option value="Select">Seleccione el Precio</option>';
					//for (var i = 0; i < response.length; i++) {
					//	options += '<option value="' + response[i].Id + '">' + '$ ' + response[i].PrecioSinIva + '.00' + '</option>';
					//}
					alert(response);
					$('#myPartialViewDiv').html(response);

					//$('#ordentemporal_IdPrecio').append(options);

				} else { $('#myPartialViewDiv').html(''); }
			}).fail(function (error) {
				console.log(error)
				$('#myPartialViewDiv').html('');
				alert(error.StatusText);
			});
		});
	});

	function AjaxCall(url, data, type) {
		return $.ajax({
			url: url,
			type: type ? type : 'GET',
			data: data,
			contentType: 'application/json'
		});
	}
</script>